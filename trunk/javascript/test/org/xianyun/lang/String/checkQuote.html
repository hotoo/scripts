<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="utf-8">
<html>
<head>
<title>quot</title>
<meta name="generator" content="Editplus" />
<meta name="author" content="闲耘 (mail[AT]xianyun.org)" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<script type="text/javascript">
function checkParentheses(str){
    var flag = 0;
    var result;
    for(var i=0; i<str.length; i++){
        switch(str.charAt(i)){
            case "(":
                 flag++;
                break;
            case ")":
                 flag--;
                break;
        }
        if(flag < 0){
            break;
        }
    }
	return flag==0;
    if(flag == 0){
        alert("括号匹配正确");
    }else{
        alert("括号匹配错误");
    }
}
/**
 * @param {String} s
 * @param {String} p ""''{}[]()<>
 */
function checkQuote(s, p){
	var t=[]; if(!p){p=[["{","}"],["[","]"],["(",")"],["<",">"],["'","'"],['"','"']];}
	outer:
	for (var i=0,l=s.length; i<l; i++){
		inner:
		for (var j=0,k=p.length,c; j<k; j++){
			c=s.charAt(i);
			if(p[j][0]==p[j][1]){
				if(c!=p[j][0]){continue;}
				if(t[t.length-1]==p[j][0]){t.pop();}
				else{t[t.length]=p[j][0];}
			}else{
				if(c==p[j][0]){t[t.length]=p[j][0];}
				else if(c==p[j][1] && t.pop()!=p[j][0]){return false;}
			}
		}

		/*
		switch (s.charAt(i)){
		case "{": t[t.length]="{";break;
		case "}": if(t.pop()!="{"){return false;}break;
		case "[": t[t.length]="[";break;
		case "]": if(t.pop()!="["){return false;}break;
		case "(": t[t.length]="(";break;
		case ")": if(t.pop()!="("){return false;}break;
		case "<": t[t.length]="<";break;
		case ">": if(t.pop()!="<"){return false;}break;
		case "'": if(t[t.length-1]=="'"){t.pop();}else{t[t.length]="'";}break;
		case '"': if(t[t.length-1]=='"'){t.pop();}else{t[t.length]='"';}break;
		}*/
	}
	return t.length==0;
}
</script>
<form onSubmit="document.getElementById('rst').innerHTML=checkQuote(this.strbox.value);return false;">
<input type="text" name="strbox" />
<input type="submit" value="Check" />
</form>
<div id="rst"></div>
</body>
</html>