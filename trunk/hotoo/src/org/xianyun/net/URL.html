<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>URL test</title>
<meta name="generator" content="Editplus">
<meta name="author" content="闲耘 (xianyun.org, mail[AT]xianyun.org)">
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script language="javascript" type="text/javascript" src="../utils/equals.js"></script>
<script language="javascript" type="text/javascript" src="../lang/Array.js"></script>
<script language="javascript" type="text/javascript" src="URL.js"></script>
<link href="" type="text/css" rel="stylesheet" />
</head>
<body>
<script type="text/javascript">
function testConstructor(){
	var u = new URL("http://www.xianyun.org/index.html?action=login&id=hotoo#");
	document.write(u.queryString);
}
testConstructor();
document.write("<hr />");
</script>
<script language="javascript">/*<![CDATA[*/

alert(URL.getParam("http://localhost:8181/plugin/favor/index.html?fav=%5B%5B%22http%3A%2F%2Fwww.baidu.com%22%2C%22baidu.com%22%5D%5D&id=20080424100715923&fid=20080424100715923_0129132916194", "fav"));

var u = [
// url										Param 	Params	paramString	paramNames
["http://abc.com/a/b.php",					"",		[],		"",			[]],
["http://abc.com/a/b.php?",					"",		[],		"",			[]],
["http://abc.com/a/b.php?NULL=NULL",		"",		[],		"NULL=NULL",["NULL"]],
["http://abc.com/a/b.php?a=b",				"b",	["b"],	"a=b",		["a"]],
["http://abc.com/a/b.php?a=b#first",		"b",	["b"],	"a=b",		["a"]],
["http://abc.com/a/b.php?a=b&b=c",			"b",	["b"],	"a=b&b=c",	["a","b"]],
["http://abc.com/a/b.php?ab=bb&a=b",		"b",	["b"],	"ab=bb&a=b",["ab","a"]],
["http://abc.com/a/b.php?ab=bb&a=b#first",	"b",	["b"],	"ab=bb&a=b",["ab","a"]],
["http://abc.com/a/b.php?a=b&a=c#first",	"c",	["b","c"],"a=b&a=c",["a"]],
["http://nickyau/js/IM/history/history.htm?a=&b=大鱼","",[""],"a=&b=大鱼",["a","b"]]
];


document.write("getParam(key)<br />");
for (var i=0; i<u.length; i++){
	var s = URL.getParam(u[i][0], "a");
	document.write((s===u[i][1]?"true":"<strong>false</strong> : "+s) +"<br />");
}
document.write("<hr />");


document.write("getParams(key)<br />");
for (var i=0; i<u.length; i++){
	var a = URL.getParams(u[i][0], "a");
	document.write((a.equals(u[i][2])) +"<br />");
}
document.write("<hr />");


document.write("getParams(key) sub<br />");
var ps = ["a=b", "?a=b", "&a=b", "a=b#", "a=b&", "?a=b#", "?a=b&", "&a=b#", "&a=b&"];
for (var j=0; j<ps.length; j++){
	var s = ps[j].replace(/.*?=(.+?)(?:&|#|$)/, "$1");
	document.write((s==="b"?"true":"<strong>false</strong>") +"<br />");
}
document.write("<hr />");


document.write("paramString()<br />");
for (var i=0; i<u.length; i++){
	var s = URL.paramString(u[i][0]);
	document.write((s===u[i][3]?"true":"<strong>false</strong> : "+s) +"<br />");
}
document.write("<hr />");


document.write("paramNames()<br />");
for (var i=0; i<u.length; i++){
	var a = URL.paramNames(u[i][0]);
	document.write((a.equals(u[i][4])?"true":"<strong>false</strong>") +"<br />");
}
document.write("<hr />");
/*]]>*/</script>
</body>
</html>