<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
HOTOO Javascript API Specification Overview
</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="String.js Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>HOTOO Javascript API Specification</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>String.js</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		No overview generated for 'String.js'<BR/><BR/>
	
</p>

<hr>



<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">/*&lt;![CDATA[*/</span>
<span class="comment">/**
 * <span class="attrib">@overview</span> org.xianyun.system.String.js [methods, classes]
 * 系统方法，字符/串类
 * org.xianyun.core.Browser.js [object]
 * <span class="attrib">@since</span> IE 6.0, Firefox 1.0, Opera 8.0
 * <span class="attrib">@author</span> 闲耘 (mail[AT]xianyun.org)
 * <span class="attrib">@version</span> 2006-6-15
 */</span>

<span class="comment">/**
 * 字符串按顺序反转。
 * <span class="attrib">@return</span> {String} 返回反转后的字符串引用。
 * <span class="attrib">@version</span> 2007/06/29
 */</span>
String.<span class="reserved">prototype</span>.reverse = <span class="reserved">function</span>(){
    var s = <span class="literal">""</span>;
    <span class="reserved">for</span> (var i=<span class="reserved">this</span>.length-1; i&gt;=0; i--){
        s += <span class="reserved">this</span>.charAt(i);
    }
    <span class="reserved">return</span> s;
};

<span class="comment">/**
 * 字符串大小写反转。
 * 需要引用 org.xianyun.lang.Character
 * <span class="attrib">@return</span> {String}
 * <span class="attrib">@version</span> 2007/06/29
 */</span>
String.<span class="reserved">prototype</span>.reverseCase = <span class="reserved">function</span>(){
    var s = <span class="literal">""</span>;
    <span class="reserved">for</span> (var i=0; i&lt;<span class="reserved">this</span>.length; i++){
        s += Character.reverseCase(<span class="reserved">this</span>.charAt(i));
        <span class="comment">//s += new Character(this.charAt(i)).reverseCase();</span>
    }
    <span class="reserved">return</span> s;
};

<span class="comment">/**
 * 将首字母转为大写。
 * <span class="attrib">@return</span> {String}
 */</span>
String.<span class="reserved">prototype</span>.upperCaseInitial = <span class="reserved">function</span>(){
	var s = <span class="reserved">this</span>.lTrim();
	<span class="reserved">if</span> (!s)<span class="reserved">return</span> <span class="reserved">this</span>;
	<span class="reserved">return</span> s.charAt(0).toUpperCase()+s.substr(1);
};

String.<span class="reserved">prototype</span>.camelize = <span class="reserved">function</span>() {
    var parts = <span class="reserved">this</span>.split(<span class="literal">'-'</span>), len = parts.length;
    <span class="reserved">if</span> (len == 1) <span class="reserved">return</span> parts[0];

    var camelized = <span class="reserved">this</span>.charAt(0) == <span class="literal">'-'</span>
      ? parts[0].charAt(0).toUpperCase() + parts[0].substring(1)
      : parts[0];

    <span class="reserved">for</span> (var i = 1; i &lt; len; i++)
        camelized += parts[i].charAt(0).toUpperCase() + parts[i].substring(1);

    <span class="reserved">return</span> camelized;
};

<span class="comment">/**
 * 判断字符串是否包含有指定的子字符串。
 * <span class="attrib">@param</span> {String} str 指定的子字符串。
 * <span class="attrib">@return</span> {Boolean}
 */</span>
String.<span class="reserved">prototype</span>.contains = <span class="reserved">function</span>(str){
	<span class="reserved">return</span> <span class="reserved">this</span>.indexOf(str)&gt;=0;
};

<span class="comment">/**
 * 数值字符串转换成十六进制表示。
 * <span class="attrib">@return</span> {String}
 * <span class="attrib">@version</span> 2007/06/30
 */</span>
String.<span class="reserved">prototype</span>.toHex = <span class="reserved">function</span>(){
    <span class="reserved">return</span> Number(<span class="reserved">this</span>).toString(16);
};

<span class="comment">/**
 * 去掉字符串左边无效空格。
 * <span class="attrib">@return</span> {String}
 */</span>
String.<span class="reserved">prototype</span>.lTrim = <span class="reserved">function</span>(){
    <span class="reserved">return</span> <span class="reserved">this</span>.replace(/^\s+/, <span class="literal">''</span>);
};

<span class="comment">/**
 * 去掉字符串右边无效空格。
 * <span class="attrib">@return</span> {String}
 */</span>
String.<span class="reserved">prototype</span>.rTrim = <span class="reserved">function</span>(){
    <span class="reserved">return</span> <span class="reserved">this</span>.replace(/\s+$/, <span class="literal">''</span>);
};

<span class="comment">/**
 * 去掉字符串左右两边无效空格。 
 * <span class="attrib">@return</span> {String}
 */</span>
String.<span class="reserved">prototype</span>.trim = <span class="reserved">function</span>(){
    <span class="reserved">return</span> <span class="reserved">this</span>.replace(/^\s*(.*?)\s*$/, <span class="literal">"$1"</span>); <span class="comment">// 两端空白字符贪婪匹配，中间字符非贪婪匹配。</span>
	<span class="comment">//return this.lTrim().rTrim();</span>
    <span class="comment">//return this.replace(/(^\s+)|(\s+$)/g, '');</span>
};

<span class="comment">/** 获得字符串左边length个字符。
 * <span class="attrib">@param</span> length, Number, Integer.
 * <span class="attrib">@return</span> String.
 * <span class="attrib">@create</span> 2007/08/03
 */</span>
String.<span class="reserved">prototype</span>.left = <span class="reserved">function</span>(length){
    <span class="reserved">return</span> <span class="reserved">this</span>.substr(0, length);
};

<span class="comment">/** 获取字符串右边length个字符。
 * <span class="attrib">@param</span> length, Number, Integer.
 * <span class="attrib">@return</span> String.
 */</span>
String.<span class="reserved">prototype</span>.right = <span class="reserved">function</span>(length){
    <span class="reserved">return</span> <span class="reserved">this</span>.substr(<span class="reserved">this</span>.length-length, length);
};

<span class="comment">/** 字符串是否以字符串suffix后缀结尾。
 * <span class="attrib">@param</span> suffix, String. 相比较的后缀。
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.endsWith = <span class="reserved">function</span>(suffix) {
    <span class="reserved">return</span> (<span class="reserved">this</span>.substr(<span class="reserved">this</span>.length - suffix.length) == suffix);
};

<span class="comment">/** 字符串是否以字符串prefix前缀开始。
 * <span class="attrib">@param</span> prefix, String. 相比较的前缀。
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.startsWith = <span class="reserved">function</span>(prefix) {
    <span class="reserved">return</span> (<span class="reserved">this</span>.substr(0, prefix.length) === prefix);
	<span class="comment">//return new RegExp("^"+prefix.toESC4RegExp()).test(this);</span>
};

<span class="comment">/** 字符串是否以字符c前缀开始。
 * <span class="attrib">@param</span> c, String, Character.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.startWith = <span class="reserved">function</span>(c){
    <span class="reserved">return</span> (<span class="reserved">this</span>.charAt(0) == c);
};

<span class="comment">/** 字符串是否以字符c后缀结束。
 * <span class="attrib">@param</span> c, String, Character.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.endWith = <span class="reserved">function</span>(c){
    <span class="reserved">return</span> (c == <span class="reserved">this</span>.charAt(<span class="reserved">this</span>.length - 1));
};

<span class="comment">/** 得到字符串的真实长度 (双字节换算为两个单字节)
 * <span class="attrib">@param</span> {void}
 * <span class="attrib">@return</span> {Number, Integer}
 */</span>
String.<span class="reserved">prototype</span>.getActualLength = <span class="reserved">function</span>(){
	<span class="reserved">return</span> <span class="reserved">this</span>.replace(/[^\x00-\xff]/g,<span class="literal">"xx"</span>).length;
};

<span class="comment">/** 比较当前字符串对象与指定对象的值是否相等，忽略大小写。
 * <span class="attrib">@param</span> string, String, Object.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.equalsIgnoreCase = <span class="reserved">function</span>(string){
    <span class="reserved">return</span> <span class="reserved">this</span>.toLowerCase() == string.toLowerCase();
};

<span class="comment">/**
 * 检查当前字符串对象的值是否是空字符串("")。
 * <span class="attrib">@return</span> {Boolean}
 */</span>
String.<span class="reserved">prototype</span>.isEmpty = <span class="reserved">function</span>(){
    <span class="reserved">return</span> (<span class="reserved">this</span>===<span class="literal">""</span> || <span class="reserved">this</span>.length===0);
};

<span class="comment">/**
 * 检查当前字符串对象是否是空白字符串（全部是空格，回车，换行，换页等）。
 * <span class="attrib">@return</span> {Boolean} 如果全部是空白字符串，则返回true，否则返回false。
 */</span>
String.<span class="reserved">prototype</span>.isBlank = <span class="reserved">function</span>(){
    <span class="reserved">return</span> /^[\s]*$/.test(<span class="reserved">this</span>);
};

<span class="comment">/** 将HTML转换成纯文本（去掉标签）
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> String.
 */</span>
String.<span class="reserved">prototype</span>.toPlainText = <span class="reserved">function</span>(){
    <span class="reserved">return</span> <span class="reserved">this</span>.replace(/&lt;.*?&gt;/, <span class="literal">""</span>); <span class="comment">// 非贪婪匹配</span>
	<span class="comment">//return this.replace(/&lt;[^&gt;]*&gt;/g, '');</span>
};

<span class="comment">/** 检查当前字符串对象的值是否符合Email格式。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.isEmail = <span class="reserved">function</span>(){
    <span class="reserved">return</span> /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(<span class="reserved">this</span>);
};

<span class="comment">/** 检查当前字符串对象的值是否符合URI格式。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.isUri = <span class="reserved">function</span>(){
    <span class="comment">// <span class="attrib">@TODO</span></span>
    alert(<span class="literal">'perfecting...'</span>);
    <span class="reserved">return</span> /^\w+:(\/\/\/|\/\/)?([\w-]+\.)+[\w-]+(\/[\w-.\/?%&amp;=]*)?$/.test(<span class="reserved">this</span>);
};

<span class="comment">/** 检查当前字符串对象的值是否符合URL格式。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Boolean.
 */</span>
String.<span class="reserved">prototype</span>.isUrl = <span class="reserved">function</span>(){
    <span class="reserved">return</span> /^http:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&amp;=]*)?$/.test(<span class="reserved">this</span>);
};

<span class="comment">/** 截取固定长度子字符串。
 * <span class="attrib">@param</span> iLen, Number, Integer. 需截取的长度值。
 * <span class="attrib">@return</span> String.
 */</span>
String.<span class="reserved">prototype</span>.getIntercepted = <span class="reserved">function</span>(iLen){
    <span class="reserved">if</span>(<span class="reserved">this</span>.getActualLength() &lt;= iLen){
		<span class="reserved">return</span> <span class="reserved">this</span>;
	}
	var ELIDED = <span class="literal">"..."</span>;
	
	var str = <span class="literal">""</span>;
	var l = 0;
	var schar;
	<span class="reserved">for</span>(var i=0; schar==<span class="reserved">this</span>.charAt(i); i++){
		str += schar;
		l += (schar.match(/[^\x00-\xff]/) != null ? 2 : 1);
		<span class="reserved">if</span>(l &gt;= iLen - ELIDED.length){
			break;
		}
	}
	str += ELIDED;
	
	<span class="reserved">return</span> str;
};

<span class="comment">/** 判断当前字符串对象是否符合日期格式。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Boolean
 * <span class="attrib">@update</span> 2007/08/03
 */</span>
String.<span class="reserved">prototype</span>.isDateTime = <span class="reserved">function</span>(){
    <span class="reserved">return</span> <span class="reserved">this</span> &amp;&amp; !isNaN(new Date(<span class="reserved">this</span>.replace(/\-/g, <span class="literal">"/"</span>)));
    <span class="comment">/*if(! this) return false;
    if(isNaN(new Date(this.replace(/\-/g, '/'))))
        return false;
    else
        return true;*/</span>
};

<span class="comment">/** 将当前字符串对象转换成对于值的日期对象。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Date.
 */</span>
String.<span class="reserved">prototype</span>.toDate = <span class="reserved">function</span>(){
    <span class="reserved">return</span> new Date(<span class="reserved">this</span>.replace(/-\/\\/g, <span class="literal">'/'</span>));
};

<span class="comment">/** 判断当前字符串对象的类型是否为type。
 * <span class="attrib">@param</span> type, String. 相比较的类型值。
 * <span class="attrib">@return</span> Boolean.
 * <span class="attrib">@see</span> Number.prototype.typeOf()
 * <span class="attrib">@ps</span> 此方法没有实用价值。
 */</span>
<span class="comment">//String.prototype.typeOf = function(){</span>
<span class="comment">//    return "String";</span>
<span class="comment">//};</span>

String.<span class="reserved">prototype</span>.toArray = <span class="reserved">function</span>(){
	<span class="reserved">return</span> <span class="reserved">this</span>.split(<span class="literal">""</span>);
};

<span class="comment">/** 将字符串转换成字符数组
 * 空字符('')串将返回空数组([])。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> Array.
 */</span>
String.<span class="reserved">prototype</span>.toChars = String.<span class="reserved">prototype</span>.toCharArray = <span class="reserved">function</span>(){
    var chars = new Array();
    <span class="reserved">for</span> (var i = 0; i &lt; <span class="reserved">this</span>.length; i++){
        chars.push(<span class="reserved">this</span>.charAt(i));
    }
    <span class="reserved">return</span> chars;
};

<span class="comment">/** 将当前字符串对象的值的转义文本转换成对于值，如 "&amp;lt;" -&gt; "&lt;"...
 * 可用于将文本放入文本框前的转换。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> String.
 */</span>
String.<span class="reserved">prototype</span>.toText = <span class="reserved">function</span>(){
    var text = <span class="reserved">this</span>;
    text = text.replace(/&lt;br&gt;/gi, Browser.isFirefox ? <span class="literal">"\n"</span> : <span class="literal">"\r\n"</span>);
    text = text.replace(/&lt;br\/&gt;/ig, Browser.isFirefox ? <span class="literal">"\n"</span> : <span class="literal">"\r\n"</span>);
    text = text.replace(/&lt;br \/&gt;/ig, Browser.isFirefox ? <span class="literal">"\n"</span> : <span class="literal">"\r\n"</span>);
	text = text.replace(/&amp;lt;/gi, <span class="literal">"&lt;"</span>);
	text = text.replace(/&amp;gt;/gi, <span class="literal">"&gt;"</span>);
	text = text.replace(/&amp;quot;/gi, <span class="literal">"\"</span><span class="literal">");
	text = text.replace(/&amp;#039;/g, "</span><span class="literal">'");
    text = text.replace(/&amp;nbsp;/g, " ");
	text = text.replace(/&amp;amp;/gi, "&amp;");
    return text;
};

/** 将当前字符串对象的值转换成转义文本。如 "&lt;" -&gt; "&amp;lt;"...
 * 可用于将文本显示为HTML前的转换。
 * @param void.
 * @return String.
 */
String.prototype.toHTML = function(){
    var html = this;
    html = html.replace(/&amp;/g, '</span>&amp;amp;<span class="literal">');
    html = html.replace(/\t/g, '</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;<span class="literal">');
    html = html.replace(/ /g, '</span>&amp;nbsp;<span class="literal">');
    html = html.replace(/&lt;/g, '</span>&amp;lt;<span class="literal">');
    html = html.replace(/&gt;/g, '</span>&amp;gt;<span class="literal">');
    html = html.replace(/\"/g, '</span>&amp;quot;<span class="literal">');
    html = html.replace(/\'</span>/g, <span class="literal">'&amp;#039;'</span>);
    html = html.replace((Browser.isFirefox ? /\n/g : /\r\n/g), <span class="literal">"&lt;br /&gt;"</span>);
    <span class="comment">//html = html.replace(/\r\n/g, '&lt;br /&gt;');</span>
    <span class="comment">//html = html.replace(/\r/g, '&lt;br /&gt;');  // 这三行相对上面注释掉的一行效率较低</span>
    <span class="comment">//html = html.replace(/\n/g, '&lt;br /&gt;'); // 但是对所有浏览器兼容</span>
    <span class="reserved">return</span> html;
};

<span class="comment">/** 为正则表达式中特殊字符转义，加上反斜杠(\)。
 * 可用于将字符串作为创建正则表达式的参数前的转换。
 * <span class="attrib">@param</span> void.
 * <span class="attrib">@return</span> String.
 */</span>
String.<span class="reserved">prototype</span>.getEspecialCharacter = <span class="reserved">function</span>(){
    var esp = new Array(<span class="literal">'!'</span>, <span class="literal">'$'</span>, <span class="literal">'^'</span>, <span class="literal">'*'</span>, <span class="literal">'\\'</span>, <span class="literal">'/'</span>, <span class="literal">'?'</span>, <span class="literal">'.'</span>, <span class="literal">'+'</span>, <span class="literal">'['</span>, <span class="literal">']'</span>, <span class="literal">'-'</span>, <span class="literal">'\'</span><span class="literal">');
    var c = this;
    for (var i = 0; i &lt; esp.length; i++){
        c = c.replace(new RegExp('</span>\\<span class="literal">' + esp[i], '</span>g<span class="literal">'), '</span>\\<span class="literal">' + esp[i]);
    };
    return c;
};
// @create 2007/06/28 for org.xianyun.ui.helper.HTAutoComplete2
String.prototype.toESC4RegExp = function(){
    return this.replace(/\!/g, "\\!").replace(/\\/g, "\\\\").replace(/\//g, "\\/").replace(/\./g, "\\.").replace(/\$/g, "\\$").replace(/\*/g, "\\*").replace(/\^/g, "\\^").replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]").replace(/\{/g, "\\{").replace(/\}/g, "\\}").replace(/\?/g, "\\?").replace(/\+/g, "\\+").replace(/\-/g, "\\-").replace(/\"/g, '</span>\\<span class="literal">"').replace(/\'/g, "</span>\\<span class="literal">'").replace(/\|/g, "\\|").replace(/\,/g, "\\,");
};

/** 将当前字符串中连续重复出现的字符/串c替换掉。即"cc", "ccccc"替换为"c"
 * @param c, null, String.为null或空字符串时替换掉所有的重复字符/串，
 *  否则仅替换连续重复的c。
 * @return String.
 * @version 2007/08/08
 */
String.prototype.unrepeat = function(c){
    return this.replace(new RegExp("("+(c?c.toESC4RegExp():".")+")+", "g"), "$1");
};

/**
 * 返回字符串中汉字对应的拼音，
 *   如果指定分隔符，则每个拼音以分隔符间隔（不能找到拼音的字符保持原样，包括间隔），否则各拼音相连；
 *   如果要求不返回全拼，则返回拼音首字母；否则返回全拼；
 *   如果指定处理函数，则在不能找到拼音时（包括英文字符），使用指定函数处理并返回，否则原样返回。
 * @param {String} p 指定分隔符。
 * @param {Boolean} b 指定全拼要求。
 * @param {Function} f 指定处理函数。
 * @return {String} 返回字符串的拼音。
 * @example &lt;code&gt;
 * "你好，hotoo.☆".pinyin(" ", true, function(c){
 * 		return "?";
 * });
 * &lt;/code&gt;
 * result : "ni hao，hotoo.?"
 */
String.prototype.pinyin = function(p, b, f){
	var a = this.split("");
	for (var i=0, l=a.length; i&lt;l; i++){
		var s = Character.pinyin(a[i], b);
		a[i] = (s===a[i]?((f instanceof Function)?f(s):s):s+(p||""));
	}
	return a.join("");
};

/**
 * 替换字符串中所有的形如{var}样的字符串成变量var的值。
 * @return {String} 返回解析后的字符串。
 */
String.prototype.mode=function(){
	var r=this.toString();
	if(/{[\w|\.]+}/.test(this)){
		var matches=this.match(/{([\w|\.]+)}/g);
		for(var i=0;i&lt;matches.length;i++){
			try{
				r=r.replace(matches[i],eval(matches[i].replace("{","").replace("}","")));
			}catch (e){}
		}
	}
	return r;
};
/**
 *字符串批量替换
 *@param 数组
 *@returns string
 *@type string
 */
String.prototype.alter=function(arr,order){
	var str=this.toString();
	for(var i=0;i&lt;arr.length;i++){
		try{
		if(order){
			str=str.replace(typeof(arr[i][1])=="object"?arr[i][1]:
				new RegExp(arr[i][1].replace(/([\(\)\[\]\{\}\^\$\+\-\*\?\.\"\'</span>\|\/\\])/g,<span class="literal">"\\$1"</span>),<span class="literal">"g"</span>),arr[i][0]);
		}<span class="reserved">else</span>{
			str=str.replace(typeof(arr[i][0])==<span class="literal">"object"</span>?arr[i][0]:
				new RegExp(arr[i][0].replace(/([\(\)\[\]\{\}\^\$\+\-\*\?\.\<span class="literal">"\'\|\/\\])/g,"</span>\\$1<span class="literal">"),"</span>g<span class="literal">"),arr[i][1])
		}
		}catch(e){}
	}
	return str;
};

/**
 * 对字符串进行base64编码。
 * @param {Object} s 可选项。true 或 false，true则为base64编码，false则为 “_______base64”+base64编码，指明为base64编码，以便解码时识别。
 */
String.prototype.b64=function(s)
{
    var input=this;
	//var arr=[["</span>＜br＞<span class="literal">","</span>\n<span class="literal">"],["</span>│<span class="literal">","</span>|<span class="literal">"],["</span>＆<span class="literal">","</span>&amp;<span class="literal">"],["</span>＝<span class="literal">","</span>=<span class="literal">"],["</span>＋<span class="literal">","</span>+<span class="literal">"],["</span>＜quot＞<span class="literal">","</span><span class="literal">'"],["＇","'</span><span class="literal">"],["</span>＂<span class="literal">",'"</span><span class="literal">']];
	//return input.alter(arr,1);
    var keyStr = "ABCDEFGHIJKLMNOP" +	"QRSTUVWXYZabcdef" +	"ghijklmnopqrstuv" +	"wxyz0123456789+/" +	"=";
    //input = input.replace(/[\'</span>]/g,<span class="literal">"\'"</span>).replace(/\<span class="literal">"/g,'\"</span><span class="literal">');
    var output = "";
	input=encodeURI(input);
    var chr1, chr2, chr3 = "";
    var enc1, enc2, enc3, enc4 = "";
    var i = 0;
    do
    {
        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);
        enc1 = chr1 &gt;&gt; 2;
        enc2 = ((chr1 &amp; 3) &lt;&lt; 4) | (chr2 &gt;&gt; 4);
        enc3 = ((chr2 &amp; 15) &lt;&lt; 2) | (chr3 &gt;&gt; 6);
        enc4 = chr3 &amp; 63;
        if (isNaN(chr2)){
            enc3 = enc4 = 64;
        }else if (isNaN(chr3)){
            enc4 = 64;
        }
        output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);
        chr1 = chr2 = chr3 = "";
        enc1 = enc2 = enc3 = enc4 = "";
    }while (i &lt; input.length);
    return (s?"":"_______base64")+output;
};
String.prototype.ub64=function (really)
{
    var input=this.toString();
	var arr=[["＜br＞","\n"],["│","|"],["＆","&amp;"],["＝","="],["＋","+"],["＜quot＞}","'</span><span class="literal">"],["</span>＇<span class="literal">","</span><span class="literal">'"],["＂",'</span><span class="literal">"'],["</span>&lt;br&gt;&lt;br&gt;<span class="literal">","</span>||<span class="literal">"]];
	if(!really)
	{
		return input.alter(arr);
	}
	//return (input);
	if(input.trim().indexOf("</span>_______base64<span class="literal">")!=0)
	{
		return input;
	}
	input=input.replace("</span>_______base64<span class="literal">","</span><span class="literal">");
    var keyStr = "</span>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=<span class="literal">";
    var output = "</span><span class="literal">";
    var chr1, chr2, chr3 = "</span><span class="literal">";
    var enc1, enc2, enc3, enc4 = "</span><span class="literal">";
    var i = 0;
    var base64test = /[^A-Za-z0-9\+\/\=]/g;
    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "</span><span class="literal">");
    do
    {
        enc1 = keyStr.indexOf(input.charAt(i++));
        enc2 = keyStr.indexOf(input.charAt(i++));
        enc3 = keyStr.indexOf(input.charAt(i++));
        enc4 = keyStr.indexOf(input.charAt(i++));
        chr1 = (enc1 &lt;&lt; 2) | (enc2 &gt;&gt; 4);
        chr2 = ((enc2 &amp; 15) &lt;&lt; 4) | (enc3 &gt;&gt; 2);
        chr3 = ((enc3 &amp; 3) &lt;&lt; 6) | enc4;
        output = output + String.fromCharCode(chr1);
        if (enc3 != 64)
        {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64)
        {
            output = output + String.fromCharCode(chr3);
        }
        chr1 = chr2 = chr3 = "</span><span class="literal">";
        enc1 = enc2 = enc3 = enc4 = "</span><span class="literal">";
    }while (i &lt; input.length);
	if(decodeURI(output).length&lt;2)
	{
		return "</span>";
	}
    <span class="reserved">return</span> decodeURI(output);
};
<span class="comment">/*]]&gt;*/</span></pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>HOTOO Javascript API Specification</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">
Copyright &copy; 2008 by hotoo
</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Sat Mar 29 23:30:03 2008</div>
</body>
</html>
