<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Simple Auto Complete</title>
<meta name="generator" content="editplus">
<meta name="author" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script language="javascript" type="text/javascript" src="AutoComplete2.js"></script>
<link href="AutoComplete2.css" type="text/css" rel="stylesheet" />
</head>
<body>
<script language="javascript">/*<![CDATA[*/
String.prototype.toSafeRegExp = function(){
    return this.replace(/\\/g, "\\\\").replace(/\//g, "\\/").replace(/\./g, "\\.").replace(/\$/g, "\\$").replace(/\*/g, "\\*").replace(/\^/g, "\\^").replace(/\(/g, "\\(").replace(/\)/g, "\\)").replace(/\[/g, "\\[").replace(/\]/g, "\\]").replace(/\{/g, "\\{").replace(/\}/g, "\\}").replace(/\?/g, "\\?").replace(/\+/g, "\\+").replace(/\-/g, "\\-").replace(/\"/g, '\\"').replace(/\'/g, "\\'").replace(/\|/g, "\\|").replace(/\,/g, "\\,");
};
String.prototype.toHTML2 = function(){
    return this.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\"/g, "&qout;").replace(/\'/g, "");
};
String.prototype.toHTML = function(){ // "<" -> "&lt;"...
    var html = this;
    html = html.replace(/&/g, '&amp;');
    html = html.replace(/\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;');
    html = html.replace(/ /g, '&nbsp;');
    html = html.replace(/</g, '&lt;');
    html = html.replace(/>/g, '&gt;');
    html = html.replace(/\"/g, '&quot;');
    html = html.replace(/\'/g, '&#039;');
    //html = html.replace((Browser.isFirefox ? /\n/g : /\r\n/g), "<br />");
    //html = html.replace(/\r\n/g, '<br />');
    //html = html.replace(/\r/g, '<br />');  // 这三行相对上面注释掉的一行效率较低
    //html = html.replace(/\n/g, '<br />'); // 但是对所有浏览器兼容
    return html;
};
/*
String.prototype.replaceRepeat = function(symbol){
    return this.replace(new RegExp(""+symbol+"{2,}", "g"), symbol);
};
var Character = function(character){ // 单个字符类
    if (character.length != 1){
        throw Error("[Error:Arguments error.\nclass:org.xianyun.Character]");
    }
    this.value = character; // private:
    this.charCode = character.charCodeAt(0); // public:readonly.
};
Character.reverseCase = function(character){ // 单个字符大小写反转，静态方法。
    var charCode = character.charCodeAt(0);
    if (charCode>=65 && charCode<=90){ // A-Z
        return String.fromCharCode(charCode + 32);
    }else if(charCode>=97 && charCode<=122){ // a-z
        return String.fromCharCode(charCode - 32);
    }else {
        return character;
    }
};
Character.getCharCode = function(character){
    return character.charCodeAt(0);
};
Character.prototype.reverseCase = function(){ // 单个字符大小写反转，成员方法。
    return Character.reverseCase(this.value);
};
Character.prototype.getCharCode = function(){
    return Character.getCharCode(this.value);
};

String.prototype.toUnicode = function(){
    var s = "";
    for (var i=0; i<this.length; i++){
        s += Character.getCharCode(this.charAt(i)).toHex();
    }
    return s;
};
String.prototype.toHex = function(){ // 数值字符串转换成十六进制表示
    return "\\u"+Number(this).toString(16);
};
Number.prototype.toHex = function(){
    return "\\u"+this.toString(16);
};

String.prototype.lTrim = function(){
    return this.replace(/(^\s*)/g, '');
};
String.prototype.rTrim = function(){
    return this.replace(/(\s*$)/g, '');
};
String.prototype.trim = function(){
    return this.replace(/(^\s*)|(\s*$)/g, '');
};
*/

/*]]>*/</script>
<script language="javascript">/*<![CDATA[*/
function followCursor(o){
    auto.followCaret = o.checked;
    auto2.followCaret = o.checked;
    auto1.followCaret = o.checked;
    auto3.followCaret = o.checked;
    auto4.followCaret = o.checked;
}
function matchEmpty(o){
    auto.matchEmpty = o.checked;
    auto1.matchEmpty = o.checked;
    auto2.matchEmpty = o.checked;
    auto3.matchEmpty = o.checked;
    auto4.matchEmpty = o.checked;
}
function matchFromBegin(o){
    auto.matchFromBegin = o.checked;
    auto1.matchFromBegin = o.checked;
    auto2.matchFromBegin = o.checked;
    auto3.matchFromBegin = o.checked;
    auto4.matchFromBegin = o.checked;
}
/*]]>*/</script>
<h2 align="center">org.xianyun.ui.helper.HTAutoComplete2 <sup>beta</sup></h2>
<p />
demo:<hr size="2" />
optional : 
<input type="checkbox" id="followCursor" onclick="followCursor(this);" /><label for="followCursor">follow caret(IE only now).</label>
<input type="checkbox" id="matchEmpty" onclick="matchEmpty(this);" /><label for="matchEmpty">match empty string.</label>
<input type="checkbox" id="matchFromBegin" onclick="matchFromBegin(this);" /><label for="matchFromBegin">match from begin.</label>

<hr size="1" />

Programming Languages (English):<input type="text" name="tags" id="tags" style="width:100%" />
<script language="javascript">/*<![CDATA[*/
var auto = new HTAutoComplete2(document.getElementById("tags"));
//auto.withCursor = true;
var pl = ["ASP", "ASP.NET", "C", "C++", "Cpp", "C#", "C Shape", "CSS", "Dephi", "Java", "Javascript", "Perl", "PHP", "Power Builder", "Python", "Small talk", "Visul Basic", "Visul Basic.NET", "X/HTML", "XML", "\"a,b\""];
auto.setArrayValue(pl);
auto.submit = function(o){alert("submit:"+o.element.value);};
/*]]>*/</script>


Beyond Songs（中文）:<input type="text" name="tags2" id="tags2" style="width:100%" />
<div id="debug2"></div>
<script language="javascript">/*<![CDATA[*/
var auto2 = new HTAutoComplete2(HTAutoComplete2.$("tags2"));
var bs = ["喜欢你", "真的爱你", "光辉岁月", "无泪的遗憾", "无悔这一生", "海阔天空", "无尽空虚", "大地", "情人"];
auto2.setArrayValue(bs);
/*]]>*/</script>


special character:<input type="text" name="tags1" id="tags1" style="width:100%" />
<div id="debug2"></div>
<script language="javascript">/*<![CDATA[*/
var auto1 = new HTAutoComplete2(HTAutoComplete2.$("tags1"));
var sc = ["```", "~~~", "!!!", "@@@", "###", "$$$", "%%%", "^^^", "&&&", "***", "(((", ")))", "{{{", "}}}", "[[[", "]]]", ":::", ";;;", "'''", '"""', "///", "???", "...", ">>>", ",,,", "<<<", "\\\\\\", "---", "___", "+++", "===", "|||"];
auto1.setArrayValue(sc);
/*]]>*/</script>

Both:<input type="text" name="tags3" id="tags3" style="width:100%" />
<div id="debug3"></div>
<script language="javascript">/*<![CDATA[*/
var auto3 = new HTAutoComplete2(HTAutoComplete2.$("tags3"));
var bt = pl.concat(bs);
auto3.setArrayValue(bt);
/*]]>*/</script>
<hr size="2" />
separators : <input type="text" name="separators" id="separators" onkeyup="sep(this);" value="，" /><br />
Beyond Songs:<input type="text" name="tags4" id="tags4" style="width:100%" />
<div id="debug4"></div>
<script language="javascript">/*<![CDATA[*/
function sep(o){auto4.separators=o.value;}
var auto4 = new HTAutoComplete2(HTAutoComplete2.$("tags4"));
auto4.setArrayValue(bt);
auto4.separators = document.getElementById("separators").value;
/*]]>*/</script>
<hr size="1" />
说明：<br />
HTAutoComplete2（区别HTAutoComplete，仅提示和自动完成一个字符串）是一个用来帮助用户自动完成输入类似多标签功能的类，它允许在一个文本框内提示和自动完成多个文本内容，主要用于类似多标签的输入。<br /><br />
默认分隔符使用英文逗号(,)，可以在运行时为每个对象设置不同的分隔符，（设想可以为一个对象设置两个或两个以上的分隔符，例如设置中文和英文逗号为分隔符(字符型，字符串则分解成字符数组)，暂未实现）。<br /><br />
所有功能在Windows Server 2003（Internet Explorer 6.0，Firefox 1.0，Opera 9.0，Netscape 8.0）下通过。<br /><br />

http://blog.xianyun.org/2007/07/autocomplete.html<br />
http://blog.xianyun.org/2007/07/javascript-htautocomplete.html<br /><br />

请多指教，hotoo.cn[AT]gmail.com
</body>
</html>