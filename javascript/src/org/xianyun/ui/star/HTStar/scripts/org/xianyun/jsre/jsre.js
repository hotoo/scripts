//<![CDATA[ * javascript runtime environment. * @author 闲耘 (HoToo) * @author http://www.xianyun.org * @p.s. 完整代码文档请见 http://www.xianyun.org/src/jsreSource.js
window.Browser={isIE:(navigator.userAgent.indexOf('MSIE')>=0)&&(navigator.userAgent.indexOf('Opera')<0),isFirefox:navigator.userAgent.indexOf('Firefox')>=0,isOpera:navigator.userAgent.indexOf('Opera')>=0,isNetscape : navigator.userAgent.indexOf('Netscape') >= 0};
window.classpath=function(){var _sc=document.getElementsByTagName('script');var _cp=_sc[_sc.length-1].getAttribute('classpath');return (_cp==null)?'classes/':_cp+'/';}();//2006-7-29
window._package=function(packageName){var r=window;var ps=packageName.split('.');for(var i=0;i<ps.length;i++){var c=ps[i];if(!r[c]){r[c]=new Object();};r=r[c];};};//2006-8-3
window._import=function(uris,classpath,fCallback){var __import=function(uri,classpath,fCallback){var path=(typeof(classpath)=='string')?classpath:this.classpath;var id='script_'+path.replace(/\//g,'_')+uri.replace(/\./g, '_');var callback=function(script){if(Browser.isIE){script.onreadystatechange=function(){if(script.readyState=='complete'||script.readyState=='loaded'){if(typeof(fCallback)=='function'){fCallback();};};};}else if(Browser.isFirefox||Browser.isNetscape){script.onload=function(){if(typeof(fCallback)=='function'){fCallback();};};}else{if(typeof(fCallback)=='function'){fCallback();};};};if(document.getElementById(id) != null){try{fCallback();}catch(e){callback(document.getElementById(id));};return;};var _url=path+uri.replace(/\./g,'/')+'.js';var script=document.createElement('script');script.setAttribute('language','javascript');script.setAttribute('type','text/javascript');script.setAttribute('id',id);script.setAttribute('src',_url);document.getElementsByTagName('head')[0].appendChild(script);callback(script);};if(typeof(uris)=='string'){__import(uris,classpath,fCallback);}else if(typeof(uris)=='object'){if(uris.length<=0){return;};var len=uris.length-1;if(typeof(uris[len][1])=='string'){imp='__import("'+uris[len][0]+'","'+uris[len][1]+'",fCallback)';}else if(typeof(classpath)=='string'){imp='__import("'+uris[len][0]+'","'+classpath+'",fCallback)';}else{imp='__import("'+uris[len][0]+'",null,fCallback)';};for(var i=len-1;i>=0;i--){if(typeof(uris[i][1])=='string'){imp='__import("'+uris[i][0]+'","'+uris[i][1]+'",function(){'+imp+';})';}else if(typeof(classpath)=='string'){imp='__import("'+uris[i][0]+'","'+classpath+'",function(){'+imp+';})';}else{imp='__import("'+uris[i][0]+'",null,function(){'+imp+';})';};};eval(imp);};};//2006-7-27
//]]>