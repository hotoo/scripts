http://www.linvswin.com/node/47


http://javascript.crockford.com/memory/leak.html

JScript 内存泄漏
Douglas Crockford
www.crockford.com


如果一个系统不能正确的管理它的内存分配，我们说这是内存泄漏。内存泄漏是一个bug。表现为性能下降和故障。

微软IE浏览器存在许多的泄漏问题，最糟糕的要数使用JScript交互。如果一个DOM对象包含一个Javascript对象引用（这样的一个事件处理函数），并且那个Javascript对象包含一个到这个DOM对象的引用，则形成一个环状结构。这本身不是一个问题。在没有其他（对象）引用至这个DOM对象和事件处理句柄（译著：或处理函数）时，垃圾收集器（一个自动的内存资源管理器）就应该两者都回收，让他们的空间可以再利用。Javascript垃圾收集器了解这种循环并且不为此困扰。不幸的是，IE的DOM没有被JScript管理。他们有自己的内存管理机制，但是这种机制并不了解关于循环的情况，所有这将变得相当麻烦。结果，当发生环状结构时，内存不能够被回收。这个不被回收的内存也就被泄露了。慢慢的，内存将被消耗尽。在用尽内存后，浏览器也将崩溃。

我们可以证明这一点。在第一个程序queuetest1中，我们将创建1000个DOM元素（span），同时，删除除最近的10个之外的所有元素。当你打开Windows任务管理器的性能标签页，你将可以看到页面文件使用后的遗留部分一直